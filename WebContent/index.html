<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
    isUserAuthenticated = false;

	$(document).ready(function() {
		$.ajax({
		    url: 'rest/user/authenticated',
		    type: "GET",
            dataType : "json",
		    statusCode: {
			        200: function() {
			        	$( ".login_register" ).hide();
                        isUserAuthenticated = true;
			        },
			        404: function() {
			        	$('.logout').hide();
			        }
		        }
		    });
        drawTableWithBooks();

        $.ajax({
            url: 'rest/user/current',
            type: "GET",
            dataType : "text"
        }).always(function(data){
            if (typeof data != 'undefined') {
                $("#user-holder").text(data);
            } else {
                $(".welcome-greeting").hide();
            }
        });
	});

    
    function logout() {
    	$.ajax({
            url: 'rest/user/logout',
            type: "GET",
            dataType: "text"
        }).always(function(data){
        	window.location.replace("login.html");
        });
    }

</script>
</head>
<body>
	<div class="login_register">
		<a href="login.html">Log In</a>
		<a href="register.html">Register</a>
	</div>
	<div class="logout">
		<a onclick="logout()"> Logout </a>
	</div>
    <div class="welcome-greeting">Welcome <span id="user-holder"></span> !</div>
    <div>
    	<a href="rest/game/resume">Resume game</a>
    	<a href="rest/game/newgame">New Game</a>
    </div>
	
	
</body>
</html>